<!DOCTYPE html>
<html lang="en" style="color: var(--bs-black); background: var(--bs-white)">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
    />
    <title>studentHistory</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=ABeeZee&amp;display=swap"
    />
    <link rel="stylesheet" href="assets/css/styles.min.css" />
  </head>

  <body
    style="
      color: var(--bs-black);
      background: #f0f8ff;
      width: 100%;
    "
  >
    <nav
      class="navbar navbar-light navbar-expand-md py-3"
      style="width: 100%; height: 160px; margin-top: 0px"
    >
      <div class="container">
        <a
          class="navbar-brand d-flex align-items-center"
          href="/<%= typeof user === 'undefined' ? 'student' : 'admin' %>/dashboard"
          ><img src="assets/img/IUT_LOGO.png" width="80" height="106" /><span
            style="font-size: 40px; color: rgba(103, 8, 8, 0.9)"
            ><strong>IUT </strong>LLIS</span
          ></a
        ><button
          data-bs-toggle="collapse"
          class="navbar-toggler"
          data-bs-target="#navcol-2"
        >
          <span class="visually-hidden">Toggle navigation</span
          ><span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navcol-2">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a href="/student/history" class="nav-link active">History</a>
            </li>
            <li class="nav-item">
              <a href="/student/reset-password" class="nav-link active">Reset Password</a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="/student/logout"
                >Logout</a
              >
            </li>
            <li class="nav-item">
              <span class="nav-link navbar-text" style="color: black;">Hi, <strong><%= student.name %></strong></span>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div
      style="
        display: flex;
        --bs-body-bg: var(--bs-danger);
        background: #f0f8ff;
        width: 100%;
      "
    >
      <form
        class="ps-lg-0"
        style="
          display: block;
          background: #f0f8ff;
          border-color: var(--bs-highlight-bg);
          transform: translate(180px);
        "
      >
        <label
          class="form-label"
          style="
            color: var(--bs-black);
            font-size: 25px;
            margin-left: 40px;
            font-family: ABeeZee, sans-serif;
            text-align: center;
          "
          ><strong>From</strong></label
        ><label
          class="form-label"
          style="
            color: var(--bs-black);
            font-size: 25px;
            margin-left: 110px;
            font-family: ABeeZee, sans-serif;
          "
          ><strong>To</strong></label
        >
        <div style="display: flex; background: #f0f8ff">
          <input
            class="form-control form-control-sm"
            id="from"
            type="date"
            style="margin-left: 10px"
            name="from"
          /><input
            class="form-control form-control-sm"
            id="to"
            type="date"
            style="margin-left: 10px"
            name="to"
          />
        </div>
      </form>
    </div>
    <div style="display: flex; margin-left: 210px; margin-top: 20px">
      <div></div>
    </div>
    <div
      style="
        background: #f0f8ff;
        position: sticky;
        overflow: auto;
        height: 1000px;
        border: 8px none #f0f8ff;
        font-size: 40px;
        width: 100%;
      "
    >
      <label
        class="form-label"
        style="
          font-family: ABeeZee, sans-serif;
          background: #f0f8ff;
          transform: translate(0px) translateY(0px) scale(1.8);
          font-size: 15px;
          margin-left: 40%;
          width: 20%;
          text-align: center;
          margin-bottom: 15px;
          margin-right: 40%;
        "
        >Leave History</label
      >
      <div
        class="table-responsive"
        style="
          height: 400px;
          width: 76%;
          font-size: 16px;
          border-radius: 10px;
          border-width: 2px;
          border-top-left-radius: 10px;
          background: var(--bs-white);
          box-shadow: 0px 0px 10px 3px var(--bs-gray-600);
          position: relative;
          text-align: left;
          font-family: ABeeZee, sans-serif;
          overflow: scroll;
          transform: perspective(0px) translate(0px);
          padding: 2%;
          padding-top: 25px;
          margin-left: 12%;
          margin-right: 12%;
        "
      >
        <table class="table">
          <thead style="position: static">
            <tr
              style="
                position: sticky;
                top: 0;
                font-size: 16px;
                width: 50%;
                height: 54px;
                padding-right: 0px;
              "
            >
              <th
                style="
                  position: sticky;
                  width: 25%;
                  border-style: solid;
                  border-color: var(--bs-gray-400);
                  background: var(--bs-gray-500);
                  height: 55px;
                "
              >
                Leave Id
              </th>
              <th
                style="
                  position: sticky;
                  width: 25%;
                  border-style: solid;
                  border-color: var(--bs-gray-400);
                  background: var(--bs-gray-500);
                  height: 55px;
                "
              >
                Time
              </th>
              <th style="width: 25%; background: var(--bs-gray-500)">Reason</th>
              <th style="width: 25%; background: var(--bs-gray-500)">
                Verdict
              </th>
            </tr>
          </thead>
          <tbody>
            <% if (leaveHistory.length > 0) { %> <% leaveHistory.forEach(leave => { %>
            <tr>
              <td>
                <a href="/student/history/details?leaveId=<%= leave.leaveId %>"
                  ><%= leave.leaveId %></a
                >
              </td>
              <td><%= leave.time %></td>
              <td><%= leave.purposeOfVisit %></td>
              <td><%= leave.supervisorStatus %></td>
            </tr>
            <% }); %> <% } %>
          </tbody>
        </table>
      </div>
      <label
        class="form-label"
        style="
          font-family: ABeeZee, sans-serif;
          background: #f0f8ff;
          transform: translate(0px) translateY(0px) scale(1.8);
          font-size: 15px;
          margin-left: 40%;
          width: 20%;
          text-align: center;
          margin-bottom: 15px;
          margin-right: 40%;
        "
        >Late History</label
      >
      <div
        class="table-responsive"
        style="
          height: 400px;
          width: 76%;
          font-size: 16px;
          border-radius: 10px;
          border-width: 2px;
          border-top-left-radius: 10px;
          background: var(--bs-white);
          box-shadow: 0px 0px 10px 3px var(--bs-gray-600);
          position: relative;
          text-align: left;
          font-family: ABeeZee, sans-serif;
          overflow: scroll;
          transform: perspective(0px) translate(0px);
          padding: 2%;
          padding-top: 25px;
          margin-left: 12%;
          margin-right: 12%;
        "
      >
        <table class="table">
          <thead style="position: static">
            <tr
              style="
                position: sticky;
                top: 0;
                font-size: 16px;
                width: 50%;
                height: 54px;
                padding-right: 0px;
              "
            >
              <th
                style="
                  position: sticky;
                  width: 25%;
                  border-style: solid;
                  border-color: var(--bs-gray-400);
                  background: var(--bs-gray-500);
                  height: 55px;
                "
              >
                Late Id
              </th>
              <th
                style="
                  position: sticky;
                  width: 25%;
                  border-style: solid;
                  border-color: var(--bs-gray-400);
                  background: var(--bs-gray-500);
                  height: 55px;
                "
              >
                Time
              </th>
              <th style="width: 25%; background: var(--bs-gray-500)">Reason</th>
              <th style="width: 25%; background: var(--bs-gray-500)">
                Prior Authorization
              </th>
            </tr>
          </thead>
          <tbody>
            <% if(lateHistory.length > 0) {%> <% lateHistory.forEach(late => {
            %>
            <tr>
              <td><a href="/student/historyDetails"><%= late.lateId%></a></td>
              <td><%= late.time%></td>
              <td><%= late.reason %></td>
              <td><%= late.priorAuthorization %></td>
            </tr>
            <% }) %> <% } %>
          </tbody>
        </table>
      </div>
    </div>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>
